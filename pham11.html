<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kinh ƒê·ªãa T·∫°ng - Ph·∫©m 11 (Audio Pinyin)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#1c1917',      /* Stone 900 */
                            card: '#292524',    /* Stone 800 */
                            border: '#44403c',  /* Stone 700 */
                            text: '#e7e5e4',    /* Stone 200 */
                            muted: '#a8a29e'    /* Stone 400 */
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&family=Noto+Sans:wght@300;400;500;600&family=Be+Vietnam+Pro:wght@400;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&display=swap'); /* Font for Chinese */
        
        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #1c1917; /* Stone 900 - Dark Mode Default */
            color: #e7e5e4; /* Stone 200 */
        }
        
        h1, h2, h3, .serif {
            font-family: 'Noto Serif', serif;
        }

        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px; 
            max-height: 400px; 
        }

        /* Custom scrollbar - Dark version */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #292524;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #57534e;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background-color: #78716c;
        }

        /* Active line - Dark version */
        .active-line {
            background-color: #451a03; /* Amber 950/Darker */
            border-left: 4px solid #f59e0b; /* Amber 500 */
            padding-left: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .transcript-item {
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
            border-bottom: 1px solid #44403c; /* Stone 700 */
            position: relative; /* For absolute positioning of audio button */
        }
        .transcript-item:hover {
            background-color: #292524; /* Stone 800 */
            border-left-color: #57534e;
        }

        /* Typography for multi-lingual display - DARK MODE COLORS */
        .cn-text {
            font-family: "Noto Serif SC", "SimSun", serif;
            font-size: 1.6em;
            color: #e7e5e4; /* Stone 200 - White-ish */
            margin-bottom: 0.2rem;
            line-height: 1.4;
            font-weight: 500;
        }
        .pinyin-text {
            color: #a8a29e; /* Stone 400 - Light Gray */
            font-size: 0.85em;
            margin-bottom: 0.35rem;
            font-family: 'Noto Sans', sans-serif;
            font-style: italic;
        }
        .viet-han-text {
            color: #fbbf24; /* Amber 400 - Bright Amber */
            font-size: 1.05em;
            font-weight: 700;
            line-height: 1.5;
            font-family: 'Noto Serif', serif;
            margin-bottom: 0.2rem;
        }
        .viet-trans-text {
            color: #86efac; /* Green 300 - Light Green */
            font-size: 1.05em;
            font-family: 'Be Vietnam Pro', sans-serif;
            line-height: 1.6;
            margin-bottom: 0.2rem;
            font-weight: 500;
        }
        .en-text {
            color: #78716c; /* Stone 500 - Dim Gray */
            font-size: 0.9em;
            font-style: italic;
            font-family: 'Noto Serif', serif;
            line-height: 1.4;
            opacity: 0.8;
        }

        /* Highlight classes for Tam Thien Tu analysis - Dark Mode Adapted */
        .char-basic {
            color: #14532d; /* Green 900 */
            background-color: #86efac; /* Green 300 */
            border-radius: 2px;
            padding: 0 2px;
            font-weight: bold;
        }
        .char-advanced {
            color: #f59e0b; /* Amber 500 */
            border-bottom: 1px dotted #f59e0b;
        }
        
        .analysis-mode-active .cn-text {
            line-height: 1.8;
        }
        
        /* Audio Button Pulse Animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(245, 158, 11, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }
        .speaking-active .audio-btn {
            color: #fbbf24;
            animation: pulse-ring 2s infinite;
        }

        /* Utility for input placeholder in dark mode */
        ::placeholder {
            color: #78716c;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Navigation / Header -->
    <header class="bg-stone-900 shadow-md border-b border-stone-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <!-- N√öT QUAY L·∫†I TRANG CH·ª¶ -->
                <a href="index.html" class="flex items-center gap-3 group decoration-0" title="Quay v·ªÅ M·ª•c L·ª•c">
                    <div class="w-9 h-9 rounded-full bg-amber-700 flex items-center justify-center text-white font-bold serif shadow-sm shadow-amber-900 group-hover:bg-amber-600 transition-colors">
                        <span class="block group-hover:hidden">ƒê</span>
                        <span class="hidden group-hover:block">‚¨Ö</span>
                    </div>
                    <div>
                        <h1 class="text-lg md:text-xl font-bold text-stone-200 tracking-wide serif leading-tight group-hover:text-amber-500 transition-colors">Kinh ƒê·ªãa T·∫°ng</h1>
                        <p class="text-xs text-stone-500 font-medium">Ph·∫©m 11: ƒê·ªãa Th·∫ßn H·ªô Ph√°p</p>
                    </div>
                </a>
            </div>
            
            <nav class="hidden md:flex gap-6 text-sm font-medium text-stone-400">
                <!-- MENU M·ª§C L·ª§C -->
                <a href="index.html" class="hover:text-amber-500 transition-colors flex items-center gap-1 text-amber-500/80">
                    <span>üìö</span> M·ª•c L·ª•c
                </a>
                <a href="#dashboard" class="hover:text-amber-500 transition-colors">T·ªïng Quan</a>
                <a href="#hanzi-analysis" class="hover:text-amber-500 transition-colors">Ph√¢n T√≠ch H√°n T·ª±</a>
                <a href="#transcript" class="hover:text-amber-500 transition-colors">N·ªôi Dung</a>
            </nav>
            
            <div class="flex gap-2">
                <button id="tttToggle" class="px-3 py-2 bg-stone-800 hover:bg-stone-700 text-green-400 rounded-md text-sm font-medium transition-colors border border-stone-700" title="T√¥ m√†u ch·ªØ c√≥ trong Tam Thi√™n T·ª±">
                    üåø Soi Tam Thi√™n T·ª±
                </button>
                <button id="modeToggle" class="px-3 py-2 bg-stone-800 hover:bg-stone-700 text-stone-300 rounded-md text-sm font-medium transition-colors border border-stone-700">
                    ‚òÄÔ∏è Ch·∫ø ƒë·ªô S√°ng
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 space-y-10 max-w-6xl">

        <!-- Hanzi Analysis Dashboard -->
        <section id="hanzi-analysis" class="bg-stone-800 p-6 md:p-8 rounded-2xl shadow-lg border border-stone-700">
            <div class="mb-6 pb-4 border-b border-stone-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div>
                    <h3 class="text-xl font-bold text-stone-200 flex items-center gap-2 serif">
                        <span class="text-green-500">üìñ</span> Ph√¢n T√≠ch T·ª´ V·ª±ng (Tam Thi√™n T·ª±)
                    </h3>
                    <p class="text-sm text-stone-400 mt-1">
                        ƒê·ªëi chi·∫øu ch·ªØ H√°n trong Ph·∫©m 11 v·ªõi danh s√°ch 3.000 ch·ªØ cƒÉn b·∫£n.
                    </p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold text-stone-200" id="uniqueCharCount">0</div>
                    <div class="text-xs text-stone-500">T·ªïng ch·ªØ H√°n duy nh·∫•t (kh√¥ng l·∫∑p)</div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Chart -->
                <div class="col-span-1 h-64 chart-container flex items-center justify-center">
                    <canvas id="vocabChart"></canvas>
                </div>

                <!-- Details -->
                <div class="col-span-2 space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-4 bg-green-900/20 rounded-lg border border-green-800/50">
                            <div class="text-sm text-green-400 font-medium mb-1">Thu·ªôc Tam Thi√™n T·ª±</div>
                            <div class="text-3xl font-bold text-green-500" id="inTTTCount">0</div>
                            <div class="text-xs text-green-400/70 mt-1" id="inTTTPerc">0%</div>
                        </div>
                        <div class="p-4 bg-amber-900/20 rounded-lg border border-amber-800/50">
                            <div class="text-sm text-amber-400 font-medium mb-1">Ngo√†i Tam Thi√™n T·ª±</div>
                            <div class="text-3xl font-bold text-amber-500" id="outTTTCount">0</div>
                            <div class="text-xs text-amber-400/70 mt-1" id="outTTTPerc">0%</div>
                        </div>
                    </div>
                    
                    <div class="bg-stone-900/50 p-4 rounded-lg text-sm text-stone-400 border border-stone-700">
                        <p class="mb-2 font-semibold text-stone-300">Nh·∫≠n x√©t:</p>
                        <p id="analysisComment">ƒêang ph√¢n t√≠ch d·ªØ li·ªáu...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Transcript & Interactive Player -->
        <section id="transcript" class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <!-- Controls Column (Left) -->
            <div class="lg:col-span-4 bg-stone-800 p-6 rounded-xl shadow-lg border border-stone-700 sticky top-24">
                <h3 class="text-lg font-bold text-stone-200 mb-4 serif border-b pb-2 border-stone-700">B·∫£ng ƒêi·ªÅu Khi·ªÉn</h3>
                
                <div class="space-y-6">
                    <!-- Simulation Controls -->
                    <div class="p-4 bg-amber-900/20 rounded-lg border border-amber-800/30">
                        <p class="text-sm text-amber-500 mb-3 font-semibold flex items-center gap-2">
                            üéß M√¥ ph·ªèng t·ª•ng
                        </p>
                        <div class="flex gap-2">
                            <button id="btnPlay" class="flex-1 bg-amber-700 hover:bg-amber-600 text-white py-2.5 px-4 rounded shadow-sm text-sm font-medium transition-colors flex justify-center items-center gap-2">
                                <span>‚ñ∂</span> B·∫Øt ƒë·∫ßu
                            </button>
                            <button id="btnPause" class="flex-1 bg-stone-700 border border-stone-600 hover:bg-stone-600 text-amber-400 py-2.5 px-4 rounded shadow-sm text-sm font-medium transition-colors hidden">
                                <span>‚è∏</span> T·∫°m d·ª´ng
                            </button>
                            <button id="btnReset" class="px-3 bg-stone-700 border border-stone-600 hover:bg-stone-600 text-stone-300 rounded shadow-sm transition-colors" title="Quay l·∫°i t·ª´ ƒë·∫ßu">
                                ‚Ü∫
                            </button>
                        </div>
                        <div class="flex justify-between items-center mt-3 px-1">
                            <span class="text-xs text-amber-500 font-mono" id="currentTimeDisplay">00:00</span>
                            <span class="text-xs text-amber-500/50">T·ª± ƒë·ªông cu·ªôn</span>
                        </div>
                        <div class="mt-3 flex items-center gap-2">
                            <input type="checkbox" id="autoRead" class="rounded border-stone-600 text-amber-600 focus:ring-amber-500 bg-stone-900">
                            <label for="autoRead" class="text-xs text-stone-400 cursor-pointer select-none">T·ª± ƒë·ªông ƒë·ªçc Pinyin khi ch·∫°y</label>
                        </div>
                    </div>

                    <!-- Search/Filter -->
                    <div>
                        <label class="block text-xs font-semibold uppercase text-stone-500 mb-1.5 tracking-wide">T√¨m ki·∫øm</label>
                        <div class="relative">
                            <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm (Vi·ªát, Anh, H√°n)..." 
                                   class="w-full pl-9 pr-3 py-2 bg-stone-900 border border-stone-700 text-stone-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-sm shadow-sm placeholder-stone-600">
                            <span class="absolute left-3 top-2.5 text-stone-500">üîç</span>
                        </div>
                    </div>

                    <!-- Jump To -->
                    <div>
                        <label class="block text-xs font-semibold uppercase text-stone-500 mb-1.5 tracking-wide">Chuy·ªÉn nhanh</label>
                        <select id="jumpSelect" class="w-full px-3 py-2 border border-stone-700 rounded-lg bg-stone-900 text-stone-300 text-sm focus:ring-amber-500 focus:border-amber-500 shadow-sm cursor-pointer hover:bg-stone-950">
                            <option value="0">00:00 - Kh·ªüi ƒë·∫ßu</option>
                            <!-- Options populated by JS -->
                        </select>
                    </div>

                    <!-- Legend for Analysis -->
                    <div id="analysisLegend" class="hidden p-4 bg-stone-900/50 rounded-lg border border-stone-700">
                        <p class="text-xs font-bold text-stone-500 uppercase mb-2">Ch√∫ gi·∫£i m√†u s·∫Øc</p>
                        <div class="flex flex-col gap-2 text-sm">
                            <div class="flex items-center gap-2">
                                <span class="px-1 bg-green-300 text-green-900 rounded font-bold font-serif">Â§©</span>
                                <span class="text-stone-400">C√≥ trong Tam Thi√™n T·ª±</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="px-1 text-amber-500 font-serif border-b border-dotted border-amber-500">Âøâ</span>
                                <span class="text-stone-400">Kh√¥ng c√≥ trong danh s√°ch</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- List Column (Right) -->
            <div class="lg:col-span-8">
                <div class="bg-stone-800 rounded-xl shadow-lg border border-stone-700 overflow-hidden flex flex-col h-[700px]">
                    <div class="p-4 border-b border-stone-700 bg-stone-800/80 flex flex-wrap gap-2 justify-between items-center backdrop-blur-sm sticky top-0 z-10">
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-stone-300 serif">N·ªôi Dung Kinh VƒÉn</span>
                            <span class="px-2 py-0.5 text-xs bg-stone-700 text-stone-300 rounded border border-stone-600">H√°n</span>
                            <span class="px-2 py-0.5 text-xs bg-amber-900/40 text-amber-400 rounded border border-amber-800/50">√Çm</span>
                            <span class="px-2 py-0.5 text-xs bg-green-900/40 text-green-400 rounded border border-green-800/50">Nghƒ©a</span>
                            <span class="px-2 py-0.5 text-xs bg-stone-700/50 text-stone-500 rounded border border-stone-700">Anh</span>
                        </div>
                        <span class="text-xs text-stone-400 bg-stone-700 px-2.5 py-1 rounded-full font-medium" id="visibleCount">0 c√¢u</span>
                    </div>
                    
                    <div id="transcriptContainer" class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1 relative scroll-smooth bg-stone-900">
                        <!-- Content populated by JS -->
                        <div class="flex flex-col items-center justify-center h-full text-stone-600 gap-2">
                            <svg class="animate-spin h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span>ƒêang t·∫£i d·ªØ li·ªáu...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-950 text-stone-500 py-10 mt-12 border-t border-stone-800">
        <div class="container mx-auto px-4 text-center">
            <div class="serif text-xl text-stone-400 mb-3">Nam M√¥ ƒê·∫°i Nguy·ªán ƒê·ªãa T·∫°ng V∆∞∆°ng B·ªì T√°t</div>
            <p class="text-sm opacity-60">D·ªØ li·ªáu ƒë∆∞·ª£c tr√≠ch xu·∫•t t·ª´ ngu·ªìn: A Di ƒê√† Ph·∫≠t TV (YouTube)</p>
            <p class="text-xs opacity-40 mt-2">Ph√¢n t√≠ch d·ª±a tr√™n danh s√°ch Tam Thi√™n T·ª± (~3000 ch·ªØ cƒÉn b·∫£n)</p>
        </div>
    </footer>

    <!-- RAW DATA STORAGE -->
    <script>
        // Updated Data for Chapter 11
        const rawSubtitleData = `
[00:00:00] Âú∞ËóèËè©Ëê®Êú¨ÊÑøÁªè Âú∞Á•ûÊä§Ê≥ïÂìÅÁ¨¨ÂçÅ‰∏Ä | d√¨ z√†ng p√∫ s√† bƒõn yu√†n jƒ´ng d√¨ sh√©n h√π f«é p«ên d√¨ sh√≠ yƒ´ | ƒê·ªãa T·∫°ng B·ªì T√°t B·ªïn Nguy·ªán Kinh - ƒê·ªãa Th·∫ßn H·ªô Ph√°p Ph·∫©m ƒê·ªá Th·∫≠p Nh·∫•t | Sutra of the Past Vows of Earth Store Bodhisattva - Chapter 11: Protection of the Dharma by the Earth Spirit | Kinh ƒê·ªãa T·∫°ng B·ªì T√°t B·ªïn Nguy·ªán - Ph·∫©m th·ª© m∆∞·ªùi m·ªôt: ƒê·ªãa Th·∫ßn H·ªô Ph√°p.
[00:00:10] Â∞îÊó∂ÂùöÁâ¢Âú∞Á•ûÁôΩ‰ΩõË®Ä„ÄÇ | ƒõr sh√≠ jiƒÅn l√°o d√¨ sh√©n b√°i f√≥ y√°n „ÄÇ | Nhƒ© th·ªùi Ki√™n Lao ƒê·ªãa Th·∫ßn b·∫°ch Ph·∫≠t ng√¥n. | At that time, the Earth Spirit Firm and Stable said to the Buddha: | L√∫c ƒë√≥, Ki√™n Lao ƒê·ªãa Th·∫ßn b·∫°ch c√πng ƒê·ª©c Ph·∫≠t r·∫±ng:
[00:00:14] ‰∏ñÂ∞ä„ÄÇÊàë‰ªéÊòîÊù•„ÄÇÁûªËßÜÈ°∂Á§ºÊó†ÈáèËè©Ëê®Êë©ËØÉËê®„ÄÇ | sh√¨ z≈´n „ÄÇ w«í c√≥ng xƒ´ l√°i „ÄÇ zhƒÅn sh√¨ d«êng l«ê w√∫ li√†ng p√∫ s√† m√≥ hƒì s√† „ÄÇ | Th·∫ø T√¥n. Ng√£ t√πng t√≠ch lai. Chi√™m th·ªã ƒë·∫£nh l·ªÖ v√¥ l∆∞·ª£ng B·ªì T√°t Ma Ha T√°t. | "World Honored One, since long ago I have beheld and bowed to immeasurable Bodhisattvas Mahasattvas." | "B·∫°ch Th·∫ø T√¥n! T·ª´ tr∆∞·ªõc ƒë·∫øn nay, con t·ª´ng chi√™m ng∆∞·ª°ng ƒë·∫£nh l·ªÖ v√¥ l∆∞·ª£ng v·ªã ƒê·∫°i B·ªì T√°t."
[00:00:22] ÁöÜÊòØÂ§ß‰∏çÂèØÊÄùËÆÆÁ•ûÈÄöÊô∫ÊÖß„ÄÇÂπøÂ∫¶‰ºóÁîü„ÄÇ | jiƒì sh√¨ d√† b√π kƒõ sƒ´ y√¨ sh√©n t≈çng zh√¨ hu√¨ „ÄÇ gu«éng d√π zh√≤ng shƒìng „ÄÇ | Giai th·ªã ƒë·∫°i b·∫•t kh·∫£ t∆∞ ngh·ªã th·∫ßn th√¥ng tr√≠ hu·ªá. Qu·∫£ng ƒë·ªô ch√∫ng sanh. | "All of them have inconceivable great spiritual penetrations and wisdom, and they extensively cross over living beings." | "C√°c Ng√†i ·∫•y ƒë·ªÅu c√≥ th·∫ßn th√¥ng tr√≠ hu·ªá l·ªõn kh√¥ng th·ªÉ nghƒ© b√†n, ƒë·ªô kh·∫Øp m·ªçi lo√†i ch√∫ng sanh."
[00:00:28] ÊòØÂú∞ËóèËè©Ëê®Êë©ËØÉËê®„ÄÇ‰∫éËØ∏Ëè©Ëê®Ë™ìÊÑøÊ∑±Èáç„ÄÇ | sh√¨ d√¨ z√†ng p√∫ s√† m√≥ hƒì s√† „ÄÇ y√∫ zh≈´ p√∫ s√† sh√¨ yu√†n shƒìn zh√≤ng „ÄÇ | Th·ªã ƒê·ªãa T·∫°ng B·ªì T√°t Ma Ha T√°t. ∆Ø ch∆∞ B·ªì T√°t th·ªá nguy·ªán th√¢m tr·ªçng. | "This Earth Store Bodhisattva Mahasattva has made deeper and weightier vows than other Bodhisattvas." | "Tuy nhi√™n, Ng√†i ƒê·ªãa T·∫°ng B·ªì T√°t ƒë√¢y so v·ªõi c√°c v·ªã B·ªì T√°t kh√°c th·ªá nguy·ªán s√¢u n·∫∑ng h∆°n."
[00:00:34] ‰∏ñÂ∞ä„ÄÇÊòØÂú∞ËóèËè©Ëê®„ÄÇ‰∫éÈòéÊµÆÊèêÊúâÂ§ßÂõ†Áºò„ÄÇ | sh√¨ z≈´n „ÄÇ sh√¨ d√¨ z√†ng p√∫ s√† „ÄÇ y√∫ y√°n f√∫ t√≠ y«íu d√† yƒ´n yu√°n „ÄÇ | Th·∫ø T√¥n. Th·ªã ƒê·ªãa T·∫°ng B·ªì T√°t. ∆Ø Di√™m Ph√π ƒê·ªÅ h·ªØu ƒë·∫°i nh√¢n duy√™n. | "World Honored One, this Earth Store Bodhisattva has great causes and conditions with Jambudvipa." | "B·∫°ch Th·∫ø T√¥n! Ng√†i ƒê·ªãa T·∫°ng B·ªì T√°t ƒë√¢y c√≥ nh√¢n duy√™n l·ªõn v·ªõi c√µi Di√™m Ph√π ƒê·ªÅ."
[00:00:39] Â¶ÇÊñáÊÆä„ÄÇÊôÆË¥§„ÄÇËßÇÈü≥„ÄÇÂº•Âãí„ÄÇ‰∫¶ÂåñÁôæÂçÉË∫´ÂΩ¢„ÄÇÂ∫¶‰∫éÂÖ≠ÈÅì„ÄÇÂÖ∂ÊÑøÂ∞öÊúâÊØïÁ´ü„ÄÇ | r√∫ w√©n sh≈´ „ÄÇ p«î xi√°n „ÄÇ guƒÅn yƒ´n „ÄÇ m√≠ l√® „ÄÇ y√¨ hu√† b«éi qiƒÅn shƒìn x√≠ng „ÄÇ d√π y√∫ li√π d√†o „ÄÇ q√≠ yu√†n sh√†ng y«íu b√¨ j√¨ng „ÄÇ | Nh∆∞ VƒÉn Th√π. Ph·ªï Hi·ªÅn. Quan √Çm. Di L·∫∑c. Di·ªác h√≥a b√°ch thi√™n th√¢n h√¨nh. ƒê·ªô ∆∞ l·ª•c ƒë·∫°o. K·ª≥ nguy·ªán th∆∞·ª£ng h·ªØu t·∫•t c√°nh. | "Although Manjushri, Universal Worthy, Guanyin, and Maitreya also manifest hundreds of thousands of forms to cross over those in the Six Paths, their vows will have an end." | "Nh∆∞ Ng√†i VƒÉn Th√π, Ng√†i Ph·ªï Hi·ªÅn, Ng√†i Quan √Çm, Ng√†i Di L·∫∑c c≈©ng h√≥a hi·ªán trƒÉm ngh√¨n th√¢n h√¨nh ƒë·ªÉ ƒë·ªô ch√∫ng sanh trong s√°u ƒë∆∞·ªùng, nh∆∞ng s·ª± ph√°t nguy·ªán c·ªßa c√°c Ng√†i c√≤n c√≥ l√∫c ho√†n m√£n."
[00:00:51] ÊòØÂú∞ËóèËè©Ëê®„ÄÇÊïôÂåñÂÖ≠ÈÅì‰∏ÄÂàá‰ºóÁîü„ÄÇÊâÄÂèëË™ìÊÑøÂä´Êï∞„ÄÇÂ¶ÇÂçÉÁôæ‰∫øÊÅíÊ≤≥Ê≤ô„ÄÇ | sh√¨ d√¨ z√†ng p√∫ s√† „ÄÇ ji√†o hu√† li√π d√†o y√≠ qi√® zh√≤ng shƒìng „ÄÇ su«í fƒÅ sh√¨ yu√†n ji√© sh√π „ÄÇ r√∫ qiƒÅn b«éi y√¨ h√©ng h√© shƒÅ „ÄÇ | Th·ªã ƒê·ªãa T·∫°ng B·ªì T√°t. Gi√°o h√≥a l·ª•c ƒë·∫°o nh·∫•t thi·∫øt ch√∫ng sanh. S·ªü ph√°t th·ªá nguy·ªán ki·∫øp s·ªë. Nh∆∞ thi√™n b√°ch ·ª©c H·∫±ng H√† sa. | "But Earth Store Bodhisattva makes vows to teach and transform all living beings in the Six Paths throughout aeons as numerous as the sands in hundreds of thousands of millions of Ganges Rivers." | "C√≤n Ng√†i ƒê·ªãa T·∫°ng B·ªì T√°t ƒë√¢y gi√°o h√≥a t·∫•t c·∫£ ch√∫ng sanh trong s√°u ƒë∆∞·ªùng, tr·∫£i qua ki·∫øp s·ªë nh∆∞ s·ªë c√°t c·ªßa trƒÉm ngh√¨n ·ª©c s√¥ng H·∫±ng, th·ªá nguy·ªán ·∫•y v·∫´n ch∆∞a m√£n."
[00:01:03] ‰∏ñÂ∞ä„ÄÇÊàëËßÇÊú™Êù•ÂèäÁé∞Âú®‰ºóÁîü„ÄÇ‰∫éÊâÄ‰ΩèÂ§Ñ„ÄÇ‰∫éÂçóÊñπÊ∏ÖÊ¥Å‰πãÂú∞„ÄÇ | sh√¨ z≈´n „ÄÇ w«í guƒÅn w√®i l√°i j√≠ xi√†n z√†i zh√≤ng shƒìng „ÄÇ y√∫ su«í zh√π ch√π „ÄÇ y√∫ n√°n fƒÅng qƒ´ng ji√© zhƒ´ d√¨ „ÄÇ | Th·∫ø T√¥n. Ng√£ quan v·ªã lai c·∫≠p hi·ªán t·∫°i ch√∫ng sanh. ∆Ø s·ªü tr·ª• x·ª©. ∆Ø nam ph∆∞∆°ng thanh khi·∫øt chi ƒë·ªãa. | "World Honored One, I see that living beings of the future and present, in their places of residence, in a clean place on the south side..." | "B·∫°ch Th·∫ø T√¥n! Con xem x√©t ch√∫ng sanh ·ªü hi·ªán t·∫°i v√† v·ªã lai, n∆°i ch·ªó ·ªü s·∫°ch s·∫Ω v·ªÅ ph∆∞∆°ng Nam..."
[00:01:11] ‰ª•ÂúüÁü≥Á´πÊú®‰ΩúÂÖ∂ÈæõÂÆ§„ÄÇ | y«ê t«î sh√≠ zh√∫ m√π zu√≤ q√≠ kƒÅn sh√¨ „ÄÇ | Dƒ© th·ªï th·∫°ch tr√∫c m·ªôc t√°c k·ª≥ kh√°m th·∫•t. | "...might use earth, stone, bamboo, or wood to make a niche or cabinet." | "...d√πng ƒë·∫•t, ƒë√°, tre, g·ªó m√† d·ª±ng c√°i kh√°m th·ªù."
[00:01:15] ÊòØ‰∏≠ËÉΩÂ°ëÁîª„ÄÇ‰πÉËá≥ÈáëÈì∂ÈìúÈìÅ„ÄÇ‰ΩúÂú∞ËóèÂΩ¢ÂÉè„ÄÇÁÉßÈ¶ô‰æõÂÖª„ÄÇÁûªÁ§ºËµûÂèπ„ÄÇ | sh√¨ zh≈çng n√©ng s√π hu√† „ÄÇ n«éi zh√¨ jƒ´n y√≠n t√≥ng tiƒõ „ÄÇ zu√≤ d√¨ z√†ng x√≠ng xi√†ng „ÄÇ shƒÅo xiƒÅng g√≤ng y√†ng „ÄÇ zhƒÅn l«ê z√†n t√†n „ÄÇ | Th·ªã trung nƒÉng t·ªë h·ªça. N√£i ch√≠ kim ng√¢n ƒë·ªìng thi·∫øt. T√°c ƒê·ªãa T·∫°ng h√¨nh t∆∞·ª£ng. Thi√™u h∆∞∆°ng c√∫ng d∆∞·ªùng. Chi√™m l·ªÖ t√°n th√°n. | "Within it, they might sculpt or paint, or even use gold, silver, copper, or iron to make an image of Earth Store Bodhisattva. Then they burn incense, make offerings, gaze at, worship, and praise him." | "Trong kh√°m ƒë√≥ c√≥ th·ªÉ h·ªça v·∫Ω, cho ƒë·∫øn d√πng v√†ng, b·∫°c, ƒë·ªìng, s·∫Øt ƒë√∫c n·∫∑n h√¨nh t∆∞·ª£ng ƒê·ªãa T·∫°ng B·ªì T√°t, r·ªìi ƒë·ªët h∆∞∆°ng c√∫ng d∆∞·ªùng, chi√™m ng∆∞·ª°ng l·ªÖ b√°i ng·ª£i khen."
[00:01:25] ÊòØ‰∫∫Â±ÖÂ§Ñ„ÄÇÂç≥ÂæóÂçÅÁßçÂà©Áõä„ÄÇ | sh√¨ r√©n j≈´ ch√π „ÄÇ j√≠ d√© sh√≠ zh«íng l√¨ y√¨ „ÄÇ | Th·ªã nh√¢n c∆∞ x·ª©. T·ª©c ƒë·∫Øc th·∫≠p ch·ªßng l·ª£i √≠ch. | "The dwelling place of such a person will obtain ten kinds of benefits." | "Ch·ªó ng∆∞·ªùi ƒë√≥ ·ªü ƒë∆∞·ª£c m∆∞·ªùi m√≥n l·ª£i √≠ch."
[00:01:29] ‰ΩïÁ≠â‰∏∫ÂçÅ„ÄÇ | h√© dƒõng w√©i sh√≠ „ÄÇ | H√† ƒë·∫≥ng vi th·∫≠p. | "What are the ten?" | "Nh·ªØng g√¨ l√† m∆∞·ªùi?"
[00:01:31] ‰∏ÄËÄÖ„ÄÇÂúüÂú∞‰∏∞Â£§„ÄÇ‰∫åËÄÖ„ÄÇÂÆ∂ÂÆÖÊ∞∏ÂÆâ„ÄÇ | yƒ´ zhƒõ „ÄÇ t«î d√¨ fƒìng r«éng „ÄÇ √®r zhƒõ „ÄÇ jiƒÅ zh√°i y«íng ƒÅn „ÄÇ | Nh·∫•t gi·∫£. Th·ªï ƒë·ªãa phong nh∆∞·ª°ng. Nh·ªã gi·∫£. Gia tr·∫°ch vƒ©nh an. | "First, the land will be fertile. Second, the household will be peaceful forever." | "M·ªôt l√† ƒë·∫•t c√°t t·ªët m√†u. Hai l√† nh√† c·ª≠a an ·ªïn m√£i m√£i."
[00:01:37] ‰∏âËÄÖ„ÄÇÂÖà‰∫°ÁîüÂ§©„ÄÇÂõõËÄÖ„ÄÇÁé∞Â≠òÁõäÂØø„ÄÇ | sƒÅn zhƒõ „ÄÇ xiƒÅn w√°ng shƒìng tiƒÅn „ÄÇ s√¨ zhƒõ „ÄÇ xi√†n c√∫n y√¨ sh√≤u „ÄÇ | Tam gi·∫£. Ti√™n vong sanh thi√™n. T·ª© gi·∫£. Hi·ªán t·ªìn √≠ch th·ªç. | "Third, deceased ancestors will be born in the heavens. Fourth, those currently living will have increased longevity." | "Ba l√† ng∆∞·ªùi ƒë√£ ch·∫øt ƒë∆∞·ª£c sanh l√™n c√µi tr·ªùi. B·ªën l√† ng∆∞·ªùi hi·ªán c√≤n h∆∞·ªüng s·ª± l·ª£i √≠ch s·ªëng l√¢u."
[00:01:43] ‰∫îËÄÖ„ÄÇÊâÄÊ±ÇÈÅÇÊÑè„ÄÇÂÖ≠ËÄÖ„ÄÇÊó†Ê∞¥ÁÅ´ÁÅæ„ÄÇ | w«î zhƒõ „ÄÇ su«í qi√∫ su√¨ y√¨ „ÄÇ li√π zhƒõ „ÄÇ w√∫ shu«ê hu«í zƒÅi „ÄÇ | Ng≈© gi·∫£. S·ªü c·∫ßu to·∫°i √Ω. L·ª•c gi·∫£. V√¥ th·ªßy h·ªèa tai. | "Fifth, whatever they seek will be as they wish. Sixth, there will be no disasters of water or fire." | "NƒÉm l√† c·∫ßu chi c≈©ng ƒë∆∞·ª£c to·∫°i √Ω. S√°u l√† kh√¥ng b·ªã tai n·∫°n v·ªÅ n∆∞·ªõc v√† l·ª≠a."
[00:01:49] ‰∏ÉËÄÖ„ÄÇËôöËÄóËæüÈô§„ÄÇÂÖ´ËÄÖ„ÄÇÊùúÁªùÊÅ∂Ê¢¶„ÄÇ | qƒ´ zhƒõ „ÄÇ x≈´ h√†o p√¨ ch√∫ „ÄÇ bƒÅ zhƒõ „ÄÇ d√π ju√© √® m√®ng „ÄÇ | Th·∫•t gi·∫£. H∆∞ hao t·ªãch tr·ª´. B√°t gi·∫£. ƒê·ªó tuy·ªát √°c m·ªông. | "Seventh, calamities will be dispelled. Eighth, they will not have nightmares." | "B·∫£y l√† tr·ª´ s·∫°ch s·ª± h∆∞ hao. T√°m l√† d·ª©t h·∫≥n √°c m·ªông."
[00:01:55] ‰πùËÄÖ„ÄÇÂá∫ÂÖ•Á•ûÊä§„ÄÇÂçÅËÄÖ„ÄÇÂ§öÈÅáÂú£Âõ†„ÄÇ | ji«î zhƒõ „ÄÇ ch≈´ r√π sh√©n h√π „ÄÇ sh√≠ zhƒõ „ÄÇ du≈ç y√π sh√®ng yƒ´n „ÄÇ | C·ª≠u gi·∫£. Xu·∫•t nh·∫≠p th·∫ßn h·ªô. Th·∫≠p gi·∫£. ƒêa ng·ªô th√°nh nh√¢n. | "Ninth, they will be protected by spirits in their comings and goings. Tenth, they will encounter many holy causes." | "Ch√≠n l√† khi ra l√∫c v√†o c√≥ th·∫ßn ·ªßng h·ªô. M∆∞·ªùi l√† th∆∞·ªùng g·∫∑p b·∫≠c Th√°nh nh√¢n."
[00:02:01] ‰∏ñÂ∞ä„ÄÇÊú™Êù•‰∏ñ‰∏≠„ÄÇÂèäÁé∞Âú®‰ºóÁîü„ÄÇËã•ËÉΩ‰∫éÊâÄ‰ΩèÂ§ÑÊñπÈù¢„ÄÇ‰ΩúÂ¶ÇÊòØ‰æõÂÖª„ÄÇÂæóÂ¶ÇÊòØÂà©Áõä„ÄÇ | sh√¨ z≈´n „ÄÇ w√®i l√°i sh√¨ zh≈çng „ÄÇ j√≠ xi√†n z√†i zh√≤ng shƒìng „ÄÇ ru√≤ n√©ng y√∫ su«í zh√π ch√π fƒÅng mi√†n „ÄÇ zu√≤ r√∫ sh√¨ g√≤ng y√†ng „ÄÇ d√© r√∫ sh√¨ l√¨ y√¨ „ÄÇ | Th·∫ø T√¥n. V·ªã lai th·∫ø trung. C·∫≠p hi·ªán t·∫°i ch√∫ng sanh. Nh∆∞·ª£c nƒÉng ∆∞ s·ªü tr·ª• x·ª© ph∆∞∆°ng di·ªán. T√°c nh∆∞ th·ªã c√∫ng d∆∞·ªùng. ƒê·∫Øc nh∆∞ th·ªã l·ª£i √≠ch. | "World Honored One, in the future and present, if living beings can make such offerings in their place of residence, they will obtain these benefits." | "B·∫°ch Th·∫ø T√¥n! Trong ƒë·ªùi sau c√πng hi·ªán t·∫°i, ch√∫ng sanh n√†o ·ªü n∆°i ch·ªó c·ªßa m√¨nh c∆∞ tr·ª• m√† c√≥ th·ªÉ l√†m vi·ªác c√∫ng d∆∞·ªùng nh∆∞ th·∫ø, th·ªùi ƒë∆∞·ª£c s·ª± l·ª£i √≠ch nh∆∞ v·∫≠y."
[00:02:11] Â§çÁôΩ‰ΩõË®Ä„ÄÇ‰∏ñÂ∞ä„ÄÇÊú™Êù•‰∏ñ‰∏≠„ÄÇËã•ÊúâÂñÑÁî∑Â≠êÂñÑÂ•≥‰∫∫„ÄÇ | f√π b√°i f√≥ y√°n „ÄÇ sh√¨ z≈´n „ÄÇ w√®i l√°i sh√¨ zh≈çng „ÄÇ ru√≤ y«íu sh√†n n√°n z«ê sh√†n n«ö r√©n „ÄÇ | Ph·ª•c b·∫°ch Ph·∫≠t ng√¥n. Th·∫ø T√¥n. V·ªã lai th·∫ø trung. Nh∆∞·ª£c h·ªØu thi·ªán nam t·ª≠ thi·ªán n·ªØ nh√¢n. | He further said to the Buddha, "World Honored One, in the future, if good men or good women..." | L·∫°i b·∫°ch c√πng ƒê·ª©c Ph·∫≠t r·∫±ng: "B·∫°ch Th·∫ø T√¥n! Trong ƒë·ªùi sau n√†y, nh∆∞ c√≥ ng∆∞·ªùi thi·ªán nam k·∫ª thi·ªán n·ªØ n√†o..."
[00:02:17] ‰∫éÊâÄ‰ΩèÂ§Ñ„ÄÇÊúâÊ≠§ÁªèÂÖ∏„ÄÇÂèäËè©Ëê®ÂÉè„ÄÇ | y√∫ su«í zh√π ch√π „ÄÇ y«íu c«ê jƒ´ng di«én „ÄÇ j√≠ p√∫ s√† xi√†ng „ÄÇ | ∆Ø s·ªü tr·ª• x·ª©. H·ªØu th·ª≠ kinh ƒëi·ªÉn. C·∫≠p B·ªì T√°t t∆∞·ª£ng. | "...have this Sutra and the Bodhisattva's image in their place of residence..." | "...·ªü n∆°i ch·ªó c·ªßa m√¨nh c∆∞ tr·ª• c√≥ kinh ƒëi·ªÉn n√†y c√πng h√¨nh t∆∞·ª£ng c·ªßa B·ªì T√°t..."
[00:02:22] ÊòØ‰∫∫Êõ¥ËÉΩËΩ¨ËØªÁªèÂÖ∏„ÄÇ‰æõÂÖªËè©Ëê®„ÄÇ | sh√¨ r√©n g√®ng n√©ng zhu«én d√∫ jƒ´ng di«én „ÄÇ g√≤ng y√†ng p√∫ s√† „ÄÇ | Th·ªã nh√¢n c√°nh nƒÉng chuy·ªÉn ƒë·ªôc kinh ƒëi·ªÉn. C√∫ng d∆∞·ªùng B·ªì T√°t. | "...and if they can further recite the Sutra and make offerings to the Bodhisattva..." | "...ng∆∞·ªùi ƒë√≥ l·∫°i c√≥ th·ªÉ t·ª•ng ƒë·ªçc kinh ƒëi·ªÉn v√† c√∫ng d∆∞·ªùng h√¨nh t∆∞·ª£ng c·ªßa B·ªì T√°t..."
[00:02:27] ÊàëÂ∏∏Êó•Â§ú„ÄÇ‰ª•Êú¨Á•ûÂäõ„ÄÇÂç´Êä§ÊòØ‰∫∫„ÄÇ | w«í ch√°ng r√¨ y√® „ÄÇ y«ê bƒõn sh√©n l√¨ „ÄÇ w√®i h√π sh√¨ r√©n „ÄÇ | Ng√£ th∆∞·ªùng nh·∫≠t d·∫°. Dƒ© b·ªïn th·∫ßn l·ª±c. V·ªá h·ªô th·ªã nh√¢n. | "...I shall constantly use my own spiritual power day and night to protect them." | "...th·ªùi con th∆∞·ªùng ng√†y ƒë√™m d√πng th·∫ßn l·ª±c c·ªßa m√¨nh h·ªô v·ªá ng∆∞·ªùi ƒë√≥."
[00:02:32] ‰πÉËá≥Ê∞¥ÁÅ´ÁõóË¥º„ÄÇÂ§ßÊ®™Â∞èÊ®™„ÄÇ‰∏ÄÂàáÊÅ∂‰∫ã„ÄÇÊÇâÁöÜÊ∂àÁÅ≠„ÄÇ | n«éi zh√¨ shu«ê hu«í d√†o z√©i „ÄÇ d√† h√®ng xi«éo h√®ng „ÄÇ y√≠ qi√® √® sh√¨ „ÄÇ xƒ´ jiƒì xiƒÅo mi√® „ÄÇ | N√£i ch√≠ th·ªßy h·ªèa ƒë·∫°o t·∫∑c. ƒê·∫°i ho·∫°nh ti·ªÉu ho·∫°nh. Nh·∫•t thi·∫øt √°c s·ª±. T·∫•t giai ti√™u di·ªát. | "Even disasters of water, fire, robbery and theft, major and minor accidents, and all evil deeds will be eliminated." | "Cho ƒë·∫øn c√°c n·∫°n n∆∞·ªõc, l·ª≠a, tr·ªôm c∆∞·ªõp, n·∫°n l·ªõn n·∫°n nh·ªè, t·∫•t c·∫£ vi·ªác √°c th·∫£y ƒë·ªÅu ti√™u s·∫°ch."
[00:02:40] ‰ΩõÂëäÂùöÁâ¢Âú∞Á•û„ÄÇÊ±ùÂ§ßÁ•ûÂäõ„ÄÇËØ∏Á•ûÂ∞ëÂèä„ÄÇ | f√≥ g√†o jiƒÅn l√°o d√¨ sh√©n „ÄÇ r«î d√† sh√©n l√¨ „ÄÇ zh≈´ sh√©n sh«éo j√≠ „ÄÇ | Ph·∫≠t c√°o Ki√™n Lao ƒê·ªãa Th·∫ßn. Nh·ªØ ƒë·∫°i th·∫ßn l·ª±c. Ch∆∞ th·∫ßn thi·ªÉu c·∫≠p. | The Buddha told the Earth Spirit Firm and Stable, "There are few spirits who can match your great spiritual power." | ƒê·ª©c Ph·∫≠t b·∫£o Ki√™n Lao ƒê·ªãa Th·∫ßn r·∫±ng: "Th·∫ßn l·ª±c l·ªõn lao c·ªßa √¥ng, c√°c th·∫ßn kh√°c √≠t ai b·∫±ng."
[00:02:46] ‰Ωï‰ª•ÊïÖ„ÄÇÈòéÊµÆÂúüÂú∞„ÄÇÊÇâËíôÊ±ùÊä§„ÄÇ | h√© y«ê g√π „ÄÇ y√°n f√∫ t«î d√¨ „ÄÇ xƒ´ m√©ng r«î h√π „ÄÇ | H√† dƒ© c·ªë. Di√™m Ph√π th·ªï ƒë·ªãa. T·∫•t m√¥ng nh·ªØ h·ªô. | "Why? Because all the land in Jambudvipa receives your protection." | "V√¨ sao th·∫ø? V√¨ ƒë·∫•t ƒëai trong c√µi Di√™m Ph√π ƒê·ªÅ ƒë·ªÅu nh·ªù √¥ng h·ªô tr·ª£."
[00:02:51] ‰πÉËá≥ËçâÊú®Ê≤ôÁü≥„ÄÇÁ®ªÈ∫ªÁ´πËãá„ÄÇË∞∑Á±≥ÂÆùË¥ù„ÄÇ‰ªéÂú∞ËÄåÊúâ„ÄÇÁöÜÂõ†Ê±ùÂäõ„ÄÇ | n«éi zh√¨ c«éo m√π shƒÅ sh√≠ „ÄÇ d√†o m√° zh√∫ wƒõi „ÄÇ g«î m«ê b«éo b√®i „ÄÇ c√≥ng d√¨ √©r y«íu „ÄÇ jiƒì yƒ´n r«î l√¨ „ÄÇ | N√£i ch√≠ th·∫£o m·ªôc sa th·∫°ch. ƒê·∫°o ma tr√∫c vi. C·ªëc m·ªÖ b·∫£o b·ªëi. T√πng ƒë·ªãa nhi h·ªØu. Giai nh√¢n nh·ªØ l·ª±c. | "Even the grass, wood, sand, stones, paddy, hemp, bamboo, reeds, grains, rice, and gems come from the earth because of your power." | "Cho ƒë·∫øn c·ªè c√¢y, c√°t ƒë√°, l√∫a m√®, tre lau, g·∫°o th√≥c, c·ªßa b√°u, t·∫•t c·∫£ c·ªßa t·ª´ ƒë·∫•t sanh ra ƒë·ªÅu nh·ªù n∆°i s·ª©c c·ªßa √¥ng c·∫£."
[00:03:02] ÂèàÂ∏∏Áß∞Êâ¨Âú∞ËóèËè©Ëê®Âà©Áõä‰πã‰∫ã„ÄÇÊ±ù‰πãÂäüÂæ∑„ÄÇÂèä‰ª•Á•ûÈÄö„ÄÇÁôæÂçÉÂÄç‰∫éÂ∏∏ÂàÜÂú∞Á•û„ÄÇ | y√≤u ch√°ng chƒìng y√°ng d√¨ z√†ng p√∫ s√† l√¨ y√¨ zhƒ´ sh√¨ „ÄÇ r«î zhƒ´ g≈çng d√© „ÄÇ j√≠ y«ê sh√©n t≈çng „ÄÇ b«éi qiƒÅn b√®i y√∫ ch√°ng f√®n d√¨ sh√©n „ÄÇ | H·ª±u th∆∞·ªùng x∆∞ng d∆∞∆°ng ƒê·ªãa T·∫°ng B·ªì T√°t l·ª£i √≠ch chi s·ª±. Nh·ªØ chi c√¥ng ƒë·ª©c. C·∫≠p dƒ© th·∫ßn th√¥ng. B√°ch thi√™n b·ªôi ∆∞ th∆∞·ªùng ph·∫≠n ƒê·ªãa Th·∫ßn. | "Moreover, you constantly praise the benefits bestowed by Earth Store Bodhisattva. Your merit and spiritual power are hundreds of thousands of times greater than those of ordinary Earth Spirits." | "√îng l·∫°i th∆∞·ªùng khen ng·ª£i nh·ªØng s·ª± l·ª£i √≠ch c·ªßa Ng√†i ƒê·ªãa T·∫°ng B·ªì T√°t, th·ªùi c√¥ng ƒë·ª©c v√† th·∫ßn th√¥ng c·ªßa √¥ng so v·ªõi c√°c ƒê·ªãa Th·∫ßn b√¨nh th∆∞·ªùng kh√°c tr·ªôi h∆°n trƒÉm ngh√¨n l·∫ßn."
[00:03:13] Ëã•Êú™Êù•‰∏ñ‰∏≠„ÄÇÊúâÂñÑÁî∑Â≠êÂñÑÂ•≥‰∫∫„ÄÇ‰æõÂÖªËè©Ëê®„ÄÇÂèäËΩ¨ËØªÊòØÁªè„ÄÇ | ru√≤ w√®i l√°i sh√¨ zh≈çng „ÄÇ y«íu sh√†n n√°n z«ê sh√†n n«ö r√©n „ÄÇ g√≤ng y√†ng p√∫ s√† „ÄÇ j√≠ zhu«én d√∫ sh√¨ jƒ´ng „ÄÇ | Nh∆∞·ª£c v·ªã lai th·∫ø trung. H·ªØu thi·ªán nam t·ª≠ thi·ªán n·ªØ nh√¢n. C√∫ng d∆∞·ªùng B·ªì T√°t. C·∫≠p chuy·ªÉn ƒë·ªôc th·ªã kinh. | "In the future, if good men or good women make offerings to the Bodhisattva and recite this Sutra..." | "Trong ƒë·ªùi sau, nh∆∞ c√≥ k·∫ª thi·ªán nam ng∆∞·ªùi thi·ªán n·ªØ n√†o c√∫ng d∆∞·ªùng B·ªì T√°t c√πng t·ª•ng ƒë·ªçc kinh n√†y..."
[00:03:22] ‰ΩÜ‰æùÂú∞ËóèÊú¨ÊÑøÁªè‰∏Ä‰∫ã‰øÆË°åËÄÖ„ÄÇ | d√†n yƒ´ d√¨ z√†ng bƒõn yu√†n jƒ´ng yƒ´ sh√¨ xi≈´ x√≠ng zhƒõ „ÄÇ | ƒê√£n y ƒê·ªãa T·∫°ng B·ªïn Nguy·ªán Kinh nh·∫•t s·ª± tu h√†nh gi·∫£. | "...or rely on even one matter in the 'Sutra of the Past Vows of Earth Store Bodhisattva' to cultivate..." | "...ch·ªâ y theo m·ªôt vi·ªác trong Kinh ƒê·ªãa T·∫°ng B·ªïn Nguy·ªán m√† tu h√†nh..."
[00:03:27] Ê±ù‰ª•Êú¨Á•ûÂäõËÄåÊã•Êä§‰πã„ÄÇ | r«î y«ê bƒõn sh√©n l√¨ √©r y≈çng h√π zhƒ´ „ÄÇ | Nh·ªØ dƒ© b·ªïn th·∫ßn l·ª±c nhi ·ªßng h·ªô chi. | "...you should use your own spiritual power to support and protect them." | "...√¥ng n√™n d√πng th·∫ßn l·ª±c c·ªßa m√¨nh m√† ·ªßng h·ªô ng∆∞·ªùi ·∫•y."
[00:03:30] Âãø‰ª§‰∏ÄÂàáÁÅæÂÆ≥Âèä‰∏çÂ¶ÇÊÑè‰∫ã„ÄÇËæÑÈóª‰∫éËÄ≥„ÄÇ‰ΩïÂÜµ‰ª§Âèó„ÄÇ | w√π l√¨ng y√≠ qi√® zƒÅi h√†i j√≠ b√π r√∫ y√¨ sh√¨ „ÄÇ zh√© w√©n y√∫ ƒõr „ÄÇ h√© ku√†ng l√¨ng sh√≤u „ÄÇ | V·∫≠t linh nh·∫•t thi·∫øt tai h·∫°i c·∫≠p b·∫•t nh∆∞ √Ω s·ª±. Tri·∫øp vƒÉn ∆∞ nhƒ©. H√† hu·ªëng linh th·ªç. | "Do not let any disasters or unpleasant events even reach their ears, much less let them undergo them." | "Ch·ªõ ƒë·ªÉ t·∫•t c·∫£ s·ª± tai h·∫°i c√πng s·ª± kh√¥ng v·ª´a √Ω l·ªçt v√†o tai ng∆∞·ªùi ƒë√≥, hu·ªëng chi l√† ƒë·ªÉ cho ph·∫£i ch·ªãu."
[00:03:38] Èùû‰ΩÜÊ±ùÁã¨Êä§ÊòØ‰∫∫ÊïÖ„ÄÇ‰∫¶ÊúâÈáäÊ¢µÁú∑Â±û„ÄÇËØ∏Â§©Áú∑Â±û„ÄÇÊã•Êä§ÊòØ‰∫∫„ÄÇ | fƒìi d√†n r«î d√∫ h√π sh√¨ r√©n g√π „ÄÇ y√¨ y«íu sh√¨ f√†n ju√†n sh«î „ÄÇ zh≈´ tiƒÅn ju√†n sh«î „ÄÇ y≈çng h√π sh√¨ r√©n „ÄÇ | Phi ƒë·∫£n nh·ªØ ƒë·ªôc h·ªô th·ªã nh√¢n c·ªë. Di·ªác h·ªØu Th√≠ch Ph·∫°m quy·∫øn thu·ªôc. Ch∆∞ thi√™n quy·∫øn thu·ªôc. ·ª¶ng h·ªô th·ªã nh√¢n. | "Not only will you protect these people, but they will also be protected by the retinues of Shakra and Brahma and the retinues of other gods." | "Ch·∫≥ng ph·∫£i ch·ªâ ri√™ng m√¨nh √¥ng h·ªô v·ªá ng∆∞·ªùi ƒë√≥, c≈©ng c√≥ h√†ng quy·∫øn thu·ªôc c·ªßa Vua tr·ªùi ƒê·∫ø Th√≠ch, Vua tr·ªùi ƒê·∫°i Ph·∫°m, quy·∫øn thu·ªôc c·ªßa ch∆∞ Thi√™n ·ªßng h·ªô ng∆∞·ªùi ƒë√≥."
[00:03:48] ‰ΩïÊïÖÂæóÂ¶ÇÊòØÂú£Ë¥§Êã•Êä§„ÄÇ | h√© g√π d√© r√∫ sh√¨ sh√®ng xi√°n y≈çng h√π „ÄÇ | H√† c·ªë ƒë·∫Øc nh∆∞ th·ªã Th√°nh Hi·ªÅn ·ªßng h·ªô. | "Why do they receive protection from such Sages and Worthies?" | "T·∫°i sao ƒë∆∞·ª£c c√°c v·ªã Hi·ªÅn Th√°nh ·ªßng h·ªô nh∆∞ th·∫ø?"
[00:03:51] ÁöÜÁî±ÁûªÁ§ºÂú∞ËóèÂΩ¢ÂÉè„ÄÇÂèäËΩ¨ËØªÊòØÊú¨ÊÑøÁªèÊïÖ„ÄÇ | jiƒì y√≥u zhƒÅn l«ê d√¨ z√†ng x√≠ng xi√†ng „ÄÇ j√≠ zhu«én d√∫ sh√¨ bƒõn yu√†n jƒ´ng g√π „ÄÇ | Giai do chi√™m l·ªÖ ƒê·ªãa T·∫°ng h√¨nh t∆∞·ª£ng. C·∫≠p chuy·ªÉn ƒë·ªôc th·ªã B·ªïn Nguy·ªán Kinh c·ªë. | "It is all because they gaze at and bow to Earth Store Bodhisattva's image and recite this Sutra of his Past Vows." | "ƒê·ªÅu do v√¨ chi√™m l·ªÖ h√¨nh t∆∞·ª£ng c·ªßa Ng√†i ƒê·ªãa T·∫°ng B·ªì T√°t v√† t·ª•ng ƒë·ªçc kinh B·ªïn Nguy·ªán n√†y."
[00:03:58] Ëá™ÁÑ∂ÊØïÁ´üÂá∫Á¶ªËã¶Êµ∑„ÄÇËØÅÊ∂ÖÊßÉ‰πê„ÄÇ‰ª•ÊòØ‰πãÊïÖ„ÄÇÂæóÂ§ßÊã•Êä§„ÄÇ | z√¨ r√°n b√¨ j√¨ng ch≈´ l√≠ k«î h«éi „ÄÇ zh√®ng ni√® p√°n l√® „ÄÇ y«ê sh√¨ zhƒ´ g√π „ÄÇ d√© d√† y≈çng h√π „ÄÇ | T·ª± nhi√™n t·∫•t c√°nh xu·∫•t ly kh·ªï h·∫£i. Ch·ª©ng Ni·∫øt B√†n l·∫°c. Dƒ© th·ªã chi c·ªë. ƒê·∫Øc ƒë·∫°i ·ªßng h·ªô. | "Naturally, they will ultimately leave the sea of suffering and certify to the bliss of Nirvana. Therefore, they receive great protection." | "T·ª± nhi√™n ƒë∆∞·ª£c r·ªët r√°o xa l√¨a bi·ªÉn kh·ªï, ch·ª©ng ƒë·∫°o Ni·∫øt B√†n vui s∆∞·ªõng. V√¨ th·∫ø n√™n ƒë∆∞·ª£c ·ªßng h·ªô l·ªõn nh∆∞ v·∫≠y."
`;

        // --- TAM THIEN TU DATA (Sample ~3000 Common Characters) ---
        const tamThienTuStr = "Â§©Âú∞‰∏æÂ≠òÂ≠êÂ≠ôÂÖ≠‰∏âÂÆ∂ÂõΩÂâçÂêéÁâõÈ©¨Ë∑ùÁâôÊó†ÊúâÁä¨ÁæäÂΩíËµ∞ÊãúË∑™ÂéªÊù•Â•≥Áî∑Â∏¶ÂÜ†Ë∂≥Â§öÁà±ÊÜéËØÜÁü•Êú®Ê†πÊòìÈöæÊó®ÁîòÊü±Ê¢ÅÂ∫äÂ∏≠Ê¨†‰ΩôÈîÑÈû†ÁÉõÁÅØÂçáÈôçÁî∞ÂÆÖËÄÅÁ´•ÈõÄÈ∏°Êàë‰ªñ‰ºØÂß®ÈìÖÈî°ÂΩπÂäüÁø∞ÁøºÂú£Ë¥§‰ªô‰ΩõÊΩ¶ÊΩÆÈ∏¢Âá§‰∏àÂØªÁõòÁõèËåß‰∏ùÊ¢ÖÊùéÊªìÊ∏ÖËÉ∏ËáÜÂ¢®Êú±Â®áÁÜüÊÖéÂªâÁßÅÊÖïËá≥Âõû‰π°Â∏ÇÂ¶áÂ§´ÂÜÖ‰∏≠Èó®Â±ãËã±ËíÇËè≤Ëë±ËãçÁôΩËã¶ÈÖ∏È©∫È©æÁü≥ÈáëÈü≥‰ø°Âê¨ÈóªÈ∏üÂÖΩÁæΩÊØõÁöÆËßíÁî≤È≥ûË°åÈ£ûÊΩúÊ≥≥ÈæôËôéÈæüÈ∫üÂçµËÉéÂåñÊπøÂΩ¢‰ΩìÈù¢Á•ûÈ¢êÁõÆÂè£ÂîáËàåÈΩøËÄ≥ÈºªÂñâÈ¢úÈ¨ìÁúâÂèëÂ§¥È¶ñËÑëÈ¢ùÈ°∂È¢êÈ¢îÈ°πÈ¢àËÇ©ËÉåËÜÇËÉÅËÖãËÖïËÇ±ËáÇÊâãÊéåÊåáÁî≤ËÑöËÖøËÜùËÉ´Ë∏ùË∏µË∂æË∫´Ë∫ØÈ™®ËÇâÈ´ìËÑëË°ÄËÑâÁ≠ãÁöÆËÇ†ËÉÉÂøÉËÇùËÑæËÇ∫ËÇæËÉÜËÉûËÉéÁ≤æÊ∞îÁ•ûÈ≠ÇÈ≠ÑÂøóÊÑèÂøµÊÉ≥ÊÄùËôëÂøßÊÑÅÂñúÊÄíÂìÄ‰πêÊÅêÊÉäÊÇ≤Ê¨¢ËÅ™ÊòéÊô∫ÊÖßÊÑöÁó¥ÊöóÈíùÊâçËâ∫ÊäÄËÉΩÂ∑•Â∑ßÁôæÂ∑•Â£´ÂÜúÂ∑•ÂïÜÂêõËá£Áà∂Â≠êÂ§´Â¶áÂÖÑÂºüÊúãÂèãÂÆæ‰∏ªÂ∏àÁîü‰∏ª‰ªÜÂ•¥Â©¢ÂÆòÂêèÂÖµÂçíÂ∞ÜÂ∏ÖÂÜõÊóÖÁî≤ËÉÑÂºìÁü¢ÂàÄÂâëÁüõÁõæÊóåÊóóÈºìÈí≤ËΩ¶ËàπËàüÊ•´Â∏ÜÊ®ØÊ©πÊ£πÊ°•Ê¢ÅÈÅìË∑ØË°óÂ∑∑ÂüéÈÉ≠ÂÆ´ÂÆ§ÊÆøÂ†Ç‰∫≠Âè∞Ê•ºÈòÅÂõ≠ÊûóÊ±†Ê≤ºÈôÇÂ°ò‰∫ïÁÅ∂ÈáúÁîëÁ¢óÁ¢üÊùØÁõòÂåôÁÆ∏Â£∂ËßûÂ∞äÁàµÂá†Ê°àÁÆ±ÁÆßÂõäÊ©êË°£Ë£≥ÂÜ†ÂÜïÈûãË¢úÁ∞™Áè•Áí∞ÈíèÈî¶Áª£ÁΩóÁªÆÂ∏ÉÂ∏õ‰∏ùÈ∫ªÊ£âÁµÆË£ÅÁºùÁ∫∫ÁªáËÄïÁ®ºÁßçÊ§çÊî∂Ëé∑‰ªìÂª™Â∫úÂ∫ìÈí±Ë¥¢Ë¥ßË¥øË¥∏Êòì‰π∞ÂçñÁß§Â∞∫ÊñóÊñõÊñ§‰∏§Èí±ÂàÜÈì¢ÂØ∏‰∏àÂØªÂ∏∏ÊØ´ÂéòÂú≠ÊíÆÊï∞ÁÆóÂä†Âáè‰πòÈô§Âπ¥ÊúàÊó•Êó∂Êò•Â§èÁßãÂÜ¨ÂØíÊöëÂÜ∑ÁÉ≠È£é‰∫ëÈõ®Èõ™Èõ∑ÁîµÈúúÈú≤ÈúûÈõæËôπÈúìÊòüËæ∞Êó•ÊúàÈò¥Èò≥‰πæÂù§ÂÆáÂÆô‰∏ñÁïåÂ±±Â∑ùÊ±üÊ≤≥ÊπñÊµ∑ÈôµÈôÜÈ´òÂéüÂπ≥ÂéüËçâÊú®Ëä±ÊûúÁ´πËãáÊùæÊüèÊ°ëÈ∫ªÁ®ªÁ≤±È∫¶Ë±ÜÈªçÁ®∑Á¶ΩÂÖΩËô´È±ºÈ£ûËµ∞ÊΩú‰ºèÂä®Ê§çÁüøÁâ©ÈáëÈì∂ÈìúÈìÅÈìÖÈî°Áè†ÁéâÂÆùÁü≥ÁêâÁíÉÁèäÁëöÁéõÁëôÁê•ÁèÄÁèçÁè†Ë±°ÁâôÁäÄËßíÈ∫ùÈ¶ôÁâõÈªÑËôéÈ™®ÈπøËå∏ÁÜäËÉÜÈæüÊùøÈ≥ñÁî≤ËùâËúïËõáÁöÆËúÇÊàøËöïÁ†ÇÁ∫¢ÈªÑËìùÁôΩÈªëÁ¥´ÁªøÈùíËµ§Ê©ôÁÅ∞Ë§êÊñπÂúÜÈïøÁü≠È´ò‰ΩéÂ§ßÂ∞èÂéöËñÑÂπøÁã≠Ê∑±ÊµÖËøúËøëËΩªÈáçÊÄ•ÁºìÂø´ÊÖ¢Â•ΩÂùèÂñÑÊÅ∂Áæé‰∏ëÊòØÈùûÁúüÂÅáËôöÂÆûÊúâÊó†ÂæóÂ§±ÊàêË¥•ÂÖ¥‰∫°ÁõõË°∞Ê≤ª‰π±ÂÆâÂç±ÂêâÂá∂Á•∏Á¶èÂØøÂ§≠Ë¥´ÂØåË¥µË¥±Â∞äÂçë‰∏ä‰∏ãÂ∑¶Âè≥ÂÜÖÂ§ñ‰∏≠Èó¥‰∏úË•øÂçóÂåóÂõõÊñπÂÖ´Èù¢Âè§‰ªäÂæÄÊù•ÂÆáÂÆôÊ¥™ËçíÁéÑÈªÑÊó•ÊúàÁõàÊòÉËæ∞ÂÆøÂàóÂº†ÂØíÊù•ÊöëÂæÄÁßãÊî∂ÂÜ¨ËóèÈó∞‰ΩôÊàêÂ≤ÅÂæãÂêïË∞ÉÈò≥‰∫ëËÖæËá¥Èõ®Èú≤Áªì‰∏∫ÈúúÈáëÁîü‰∏ΩÊ∞¥ÁéâÂá∫ÊòÜÂÜàÂâëÂè∑Â∑®ÈòôÁè†Áß∞Â§úÂÖâÊûúÁèçÊùéÊü∞ËèúÈáçËä•ÂßúÊµ∑Âí∏Ê≤≥Ê∑°È≥ûÊΩúÁæΩÁøîÈæôÂ∏àÁÅ´Â∏ùÈ∏üÂÆò‰∫∫ÁöáÂßãÂà∂ÊñáÂ≠ó‰πÉÊúçË°£Ë£≥Êé®‰ΩçËÆ©ÂõΩÊúâËôûÈô∂ÂîêÂêäÊ∞ë‰ºêÁΩ™Âë®ÂèëÊÆ∑Ê±§ÂùêÊúùÈóÆÈÅìÂûÇÊã±Âπ≥Á´†Áà±ËÇ≤ÈªéÈ¶ñËá£‰ºèÊàéÁæåÈÅêËø©‰∏Ä‰ΩìÁéáÂÆæÂΩíÁéãÈ∏£Âá§Âú®Á´πÁôΩÈ©πÈ£üÂú∫ÂåñË¢´ËçâÊú®ËµñÂèä‰∏áÊñπÁõñÊ≠§Ë∫´ÂèëÂõõÂ§ß‰∫îÂ∏∏ÊÅ≠ÊÉüÈû†ÂÖªÂ≤ÇÊï¢ÊØÅ‰º§Â•≥ÊÖïË¥ûÊ¥ÅÁî∑ÊïàÊâçËâØÁü•ËøáÂøÖÊîπÂæóËÉΩËé´ÂøòÁΩîË∞àÂΩºÁü≠Èù°ÊÅÉÂ∑±Èïø‰ø°‰ΩøÂèØË¶ÜÂô®Ê¨≤ÈöæÈáèÂ¢®ÊÇ≤‰∏ùÊüìËØóËµûÁæîÁæäÊôØË°åÁª¥Ë¥§ÂÖãÂøµ‰ΩúÂú£Âæ∑Âª∫ÂêçÁ´ãÂΩ¢Á´ØË°®Ê≠£Á©∫Ë∞∑‰º†Â£∞ËôöÂ†Ç‰π†Âê¨Á•∏Âõ†ÊÅ∂ÁßØÁ¶èÁºòÂñÑÂ∫ÜÂ∞∫ÁíßÈùûÂÆùÂØ∏Èò¥ÊòØÁ´ûËµÑÁà∂‰∫ãÂêõÊõ∞‰∏•‰∏éÊï¨Â≠ùÂΩìÁ´≠ÂäõÂø†ÂàôÂ∞ΩÂëΩ‰∏¥Ê∑±Â±•ËñÑÂ§ôÂÖ¥Ê∏©Ê∏Ö‰ººÂÖ∞ÊñØÈ¶®Â¶ÇÊùæ‰πãÁõõÂ∑ùÊµÅ‰∏çÊÅØÊ∏äÊæÑÂèñÊò†ÂÆπÊ≠¢Ëã•ÊÄùË®ÄËæûÂÆâÂÆöÁ¨ÉÂàùËØöÁæéÊÖéÁªàÂÆú‰ª§Ëç£‰∏öÊâÄÂü∫Á±çÁîöÊó†Á´üÂ≠¶‰ºòÁôª‰ªïÊëÑËÅå‰ªéÊîøÂ≠ò‰ª•ÁîòÊ£†ÂéªËÄåÁõäÂíè‰πêÊÆäË¥µË¥±Á§ºÂà´Â∞äÂçë‰∏äÂíå‰∏ãÁù¶Â§´Âî±Â¶áÈöèÂ§ñÂèóÂÇÖËÆ≠ÂÖ•Â•âÊØç‰ª™ËØ∏Âßë‰ºØÂèîÁäπÂ≠êÊØîÂÑøÂ≠îÊÄÄÂÖÑÂºüÂêåÊ∞îËøûÊûù‰∫§ÂèãÊäïÂàÜÂàáÁ£®ÁÆ¥ËßÑ‰ªÅÊÖàÈöêÊÅªÈÄ†Ê¨°ÂºóÁ¶ªËäÇ‰πâÂªâÈÄÄÈ¢†Ê≤õÂå™‰∫èÊÄßÈùôÊÉÖÈÄ∏ÂøÉÂä®Á•ûÁñ≤ÂÆàÁúüÂøóÊª°ÈÄêÁâ©ÊÑèÁßªÂùöÊåÅÈõÖÊìçÂ•ΩÁàµËá™Á∏ªÈÉΩÈÇëÂçéÂ§è‰∏úË•ø‰∫å‰∫¨ËÉåÈÇôÈù¢Ê¥õÊµÆÊ∏≠ÊçÆÊ≥æÂÆ´ÊÆøÁõòÈÉÅÊ•ºËßÇÈ£ûÊÉäÂõæÂÜôÁ¶ΩÂÖΩÁîªÂΩ©‰ªôÁÅµ‰∏ôËàçÂÇçÂêØÁî≤Â∏êÂØπÊ•πËÇÜÁ≠µËÆæÂ∏≠ÈºìÁëüÂêπÁ¨ôÂçáÈò∂Á∫≥ÈôõÂºÅËΩ¨ÁñëÊòüÂè≥ÈÄöÂπøÂÜÖÂ∑¶ËææÊâøÊòéÊó¢ÈõÜÂùüÂÖ∏‰∫¶ËÅöÁæ§Ëã±ÊùúÁ®øÈíüÈö∂ÊºÜ‰π¶Â£ÅÁªèÂ∫úÁΩóÂ∞ÜÁõ∏Ë∑Ø‰æ†ÊßêÂçøÊà∑Â∞ÅÂÖ´ÂéøÂÆ∂ÁªôÂçÉÂÖµÈ´òÂÜ†Èô™ËæáÈ©±ÊØÇÊåØÁº®‰∏ñÁ¶Ñ‰æàÂØåËΩ¶È©æËÇ•ËΩªÁ≠ñÂäüËåÇÂÆûÂãíÁ¢ëÂàªÈì≠Á£ªÊ∫™‰ºäÂ∞π‰ΩêÊó∂ÈòøË°°Â•ÑÂÆÖÊõ≤ÈòúÂæÆÊó¶Â≠∞Ëê•Ê°ìÂÖ¨Âå°ÂêàÊµéÂº±Êâ∂ÂÄæÁªÆÂõûÊ±âÊÉ†ËØ¥ÊÑüÊ≠¶‰∏Å‰øä‰πÇÂØÜÂãøÂ§öÂ£´ÂØîÂÆÅÊôãÊ•öÊõ¥Èú∏ËµµÈ≠èÂõ∞Ê®™ÂÅáÈÄîÁÅ≠ÂüüË∑µÂúü‰ºöÁõü‰ΩïÈÅµÁ∫¶Ê≥ïÈü©ÂºäÁÉ¶ÂàëËµ∑Áø¶È¢áÁâßÁî®ÂÜõÊúÄÁ≤æÂÆ£Â®ÅÊ≤ôÊº†È©∞Ë™â‰∏πÈùí‰πùÂ∑ûÁ¶πËøπÁôæÈÉ°Áß¶Âπ∂Â≤≥ÂÆóÊ≥∞Â≤±Á¶Ö‰∏ª‰∫ë‰∫≠ÈõÅÈó®Á¥´Â°ûÈ∏°Áî∞Ëµ§ÂüéÊòÜÊ±†Á¢£Áü≥Â∑®ÈáéÊ¥ûÂ∫≠Êó∑ËøúÁªµÈÇàÂ≤©Â≤´Êù≥ÂÜ•Ê≤ªÊú¨‰∫éÂÜúÂä°ÂÖπÁ®ºÁ©ë‰ø∂ËΩΩÂçó‰∫©ÊàëËâ∫ÈªçÁ®∑Á®éÁÜüË¥°Êñ∞ÂäùËµèÈªúÈôüÂ≠üËΩ≤Êï¶Á¥†Âè≤È±ºÁßâÁõ¥Â∫∂Âá†‰∏≠Â∫∏Âä≥Ë∞¶Ë∞®ÊïïËÅÜÈü≥ÂØüÁêÜÈâ¥Ë≤åËæ®Ëâ≤Ë¥ªÂé•ÂòâÁå∑ÂãâÂÖ∂Á•óÊ§çÁúÅË∫¨ËÆ•ËØ´ÂÆ†Â¢ûÊäóÊûÅÊÆÜËæ±ËøëËÄªÊûóÁöãÂπ∏Âç≥‰∏§ÁñèËßÅÊú∫Ëß£ÁªÑË∞ÅÈÄºÁ¥¢Â±ÖÈó≤Â§ÑÊ≤âÈªòÂØÇÂØ•Ê±ÇÂè§ÂØªËÆ∫Êï£ËôëÈÄçÈÅ•Ê¨£Â•èÁ¥ØÈÅ£ÊàöË∞¢Ê¨¢ÊãõÊ∏†Ëç∑ÁöÑÂéÜÂõ≠ËéΩÊäΩÊù°ÊûáÊù∑ÊôöÁø†Ê¢ßÊ°êÊó©ÂáãÈôàÊ†πÂßîÁø≥ËêΩÂè∂È£òÊëáÊ∏∏ÈπçÁã¨ËøêÂáåÊë©ÁªõÈúÑ";
        
        const tamThienTuSet = new Set(tamThienTuStr);

        // --- APP STATE ---
        let transcripts = [];
        let simulationInterval = null;
        let isPlaying = false;
        let currentSimulationTime = 0; 
        const simulationSpeed = 1; 
        let analysisMode = false;
        let vocabChartInstance = null;

        // --- CORE FUNCTIONS ---

        // 1. Text-to-Speech Functionality (iOS Optimized & Retry Logic)
        
        // GLOBAL VARIABLE to prevent iOS Safari Garbage Collection (Critical Fix)
        window.currentUtterance = null; 
        let availableVoices = [];

        function loadVoices() {
            if ('speechSynthesis' in window) {
                availableVoices = window.speechSynthesis.getVoices();
            }
        }
        
        // Initialize voices (Chrome loads immediately, iOS waits for event)
        if ('speechSynthesis' in window) {
            loadVoices();
            window.speechSynthesis.onvoiceschanged = loadVoices;
        }

        function speakText(text, btnId, retry = true) {
            if (!text) return; // Prevent empty text errors

            if ('speechSynthesis' in window) {
                // Cancel current speech if any to avoid queue backup
                window.speechSynthesis.cancel();
                
                // Visual feedback
                if(btnId) {
                    document.querySelectorAll('.speaking-active').forEach(el => el.classList.remove('speaking-active'));
                    const btn = document.getElementById(btnId);
                    if(btn) btn.classList.add('speaking-active');
                }

                // Create Utterance
                const utterance = new SpeechSynthesisUtterance(text);
                
                // --- iOS FIX: EXPLICITLY FIND CHINESE VOICE ---
                // iOS sometimes ignores 'lang' property if voice is not set explicitly
                if (retry) {
                    if (availableVoices.length === 0) {
                        availableVoices = window.speechSynthesis.getVoices();
                    }
                    
                    const zhVoice = availableVoices.find(v => v.lang === 'zh-CN') || 
                                    availableVoices.find(v => v.lang.startsWith('zh'));
                    
                    if (zhVoice) {
                        utterance.voice = zhVoice;
                        utterance.lang = zhVoice.lang;
                    } else {
                        utterance.lang = 'zh-CN'; // Fallback
                    }
                } else {
                    // Retry with minimal configuration to avoid "isTrusted" errors
                    utterance.lang = 'zh-CN'; 
                    // Do not set specific voice object on retry
                }
                
                utterance.rate = 0.8; // Slower rate for learning
                
                // --- iOS FIX: PREVENT GARBAGE COLLECTION ---
                // Assign to global variable so Safari doesn't kill it mid-speech
                window.currentUtterance = utterance;

                utterance.onend = function() {
                    if(btnId) {
                        const btn = document.getElementById(btnId);
                        if(btn) btn.classList.remove('speaking-active');
                    }
                    window.currentUtterance = null; // Clean up
                };

                utterance.onerror = function(e) {
                    console.error("Speech Error:", e);
                    
                    // Smart Retry Logic for "isTrusted" errors
                    if (retry) {
                        console.log("Retrying speech with simple configuration...");
                        // Clear active state momentarily
                        if(btnId) {
                            const btn = document.getElementById(btnId);
                            if(btn) btn.classList.remove('speaking-active');
                        }
                        
                        setTimeout(() => {
                            speakText(text, btnId, false); // Retry with retry=false
                        }, 100);
                        return;
                    }

                    if(btnId) {
                        const btn = document.getElementById(btnId);
                        if(btn) btn.classList.remove('speaking-active');
                    }
                };

                window.speechSynthesis.speak(utterance);
            } else {
                console.warn("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ Text-to-Speech");
            }
        }

        // 2. Parse Data
        function parseSubtitles(raw) {
            const lines = raw.trim().split('\n');
            const parsed = [];
            // Regex captures: 1=HH, 2=MM, 3=SS, 4=Chinese, 5=Pinyin, 6=Viet (Han), 7=English, 8=Viet (Trans)
            const regex = /\[(\d{2}):(\d{2}):(\d{2})\]\s*(.*?)\s*\|\s*(.*?)\s*\|\s*(.*?)\s*\|\s*(.*?)\s*\|\s*(.*)/;

            lines.forEach((line, index) => {
                const match = line.match(regex);
                if (match) {
                    const hours = parseInt(match[1]);
                    const minutes = parseInt(match[2]);
                    const seconds = parseInt(match[3]);
                    const cnText = match[4].trim();
                    const pinyinText = match[5].trim();
                    const vietHanText = match[6].trim();
                    const enText = match[7].trim();
                    const vietTransText = match[8].trim();
                    const totalSeconds = hours * 3600 + minutes * 60 + seconds;
                    
                    parsed.push({
                        id: index,
                        timeFormatted: `${hours > 0 ? match[1] + ':' : ''}${match[2]}:${match[3]}`,
                        seconds: totalSeconds,
                        cn: cnText,
                        pinyin: pinyinText,
                        vietHan: vietHanText,
                        en: enText,
                        vietTrans: vietTransText,
                        // Search text combined
                        searchText: (cnText + ' ' + pinyinText + ' ' + vietHanText + ' ' + enText + ' ' + vietTransText).toLowerCase()
                    });
                }
            });
            return parsed;
        }

        // 3. Analyze Vocabulary (unchanged logic)
        function analyzeVocabulary(items) {
            const allChars = new Set();
            items.forEach(item => {
                const chars = item.cn.match(/[\u4e00-\u9fa5]/g);
                if (chars) chars.forEach(c => allChars.add(c));
            });

            let inCount = 0;
            let outCount = 0;
            const total = allChars.size;

            allChars.forEach(char => {
                if (tamThienTuSet.has(char)) inCount++;
                else outCount++;
            });

            const inPerc = total > 0 ? Math.round((inCount / total) * 100) : 0;
            const outPerc = total > 0 ? 100 - inPerc : 0;

            document.getElementById('uniqueCharCount').textContent = total;
            document.getElementById('inTTTCount').textContent = inCount;
            document.getElementById('inTTTPerc').textContent = `${inPerc}%`;
            document.getElementById('outTTTCount').textContent = outCount;
            document.getElementById('outTTTPerc').textContent = `${outPerc}%`;

            const commentEl = document.getElementById('analysisComment');
            if (inPerc > 80) commentEl.textContent = `VƒÉn b·∫£n s·ª≠ d·ª•ng ph·∫ßn l·ªõn l√† c√°c ch·ªØ cƒÉn b·∫£n (${inPerc}%), cho th·∫•y ng√¥n ng·ªØ kinh ƒëi·ªÉn kh√° g·∫ßn g≈©i v√† d·ªÖ ti·∫øp c·∫≠n v·ªõi ng∆∞·ªùi c√≥ v·ªën H√°n ng·ªØ c∆° s·ªü.`;
            else if (inPerc > 50) commentEl.textContent = `VƒÉn b·∫£n c√≥ s·ª± k·∫øt h·ª£p c√¢n b·∫±ng gi·ªØa t·ª´ v·ª±ng cƒÉn b·∫£n v√† thu·∫≠t ng·ªØ chuy√™n s√¢u.`;
            else commentEl.textContent = `VƒÉn b·∫£n ch·ª©a nhi·ªÅu thu·∫≠t ng·ªØ chuy√™n m√¥n ho·∫∑c ch·ªØ hi·∫øm g·∫∑p, c·∫ßn tra c·ª©u k·ªπ.`;

            renderVocabChart(inCount, outCount);
        }

        function renderVocabChart(inCount, outCount) {
            const ctx = document.getElementById('vocabChart').getContext('2d');
            if(vocabChartInstance) vocabChartInstance.destroy();
            
            // Determine if dark mode is active (by checking body bg color)
            const isDark = getComputedStyle(document.body).backgroundColor === 'rgb(28, 25, 23)'; // Stone 900
            const textColor = isDark ? '#e7e5e4' : '#44403c';

            vocabChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Trong Tam Thi√™n T·ª±', 'Ngo√†i danh s√°ch'],
                    datasets: [{
                        data: [inCount, outCount],
                        backgroundColor: ['#22c55e', '#f59e0b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom', 
                            labels: { 
                                usePointStyle: true, 
                                font: { family: "'Noto Sans', sans-serif" },
                                color: textColor
                            } 
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const val = context.raw;
                                    const total = context.chart._metasets[context.datasetIndex].total;
                                    const perc = Math.round((val/total)*100) + '%';
                                    return ` ${context.label}: ${val} (${perc})`;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        // 4. Render List (Updated with Audio Button)
        function renderList(items) {
            const container = document.getElementById('transcriptContainer');
            container.innerHTML = '';
            
            if (items.length === 0) {
                container.innerHTML = '<div class="p-8 text-center text-stone-500 flex flex-col items-center gap-2"><span class="text-2xl">üì≠</span><span>Kh√¥ng t√¨m th·∫•y n·ªôi dung ph√π h·ª£p.</span></div>';
                document.getElementById('visibleCount').textContent = '0 c√¢u';
                return;
            }

            items.forEach((item, index) => {
                const div = document.createElement('div');
                div.id = `line-${item.id}`;
                div.className = 'transcript-item p-4 rounded-lg cursor-pointer mb-2';
                div.onclick = () => jumpToTime(item.seconds);
                
                let processedCn = item.cn;
                if (analysisMode) {
                    processedCn = item.cn.split('').map(char => {
                        if (/[\u4e00-\u9fa5]/.test(char)) {
                            if (tamThienTuSet.has(char)) {
                                return `<span class="char-basic" title="C√≥ trong Tam Thi√™n T·ª±">${char}</span>`;
                            } else {
                                return `<span class="char-advanced" title="Kh√¥ng c√≥ trong danh s√°ch">${char}</span>`;
                            }
                        }
                        return char;
                    }).join('');
                }

                // Add Audio Button (Stop propagation to prevent jump when clicking audio)
                // Note: We send Chinese text (item.cn) to the TTS engine because engines pronounce Hanzi correctly as Pinyin.
                div.innerHTML = `
                    <div class="flex gap-4 items-start relative pr-8">
                        <span class="text-xs font-mono text-amber-500 bg-amber-900/30 px-2 py-1 rounded h-fit shrink-0 mt-2 border border-amber-800/50">${item.timeFormatted}</span>
                        <div class="flex-1 space-y-1">
                            <div class="cn-text text-xl">${processedCn}</div>
                            <div class="pinyin-text">${item.pinyin}</div>
                            <div class="viet-han-text">${item.vietHan}</div>
                            <div class="viet-trans-text">${item.vietTrans}</div>
                            <div class="en-text">${item.en}</div>
                        </div>
                        <button id="audio-btn-${item.id}" 
                                onclick="event.stopPropagation(); speakText('${item.cn.replace(/'/g, "\\'")}', 'audio-btn-${item.id}')" 
                                class="absolute right-0 top-2 text-stone-600 hover:text-amber-500 transition-all p-2 rounded-full hover:bg-stone-700/50 audio-btn" 
                                title="Nghe ƒë·ªçc Pinyin">
                            üîä
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
            
            document.getElementById('visibleCount').textContent = `${items.length} c√¢u`;
        }

        // 5. Initialize Stats & Jump
        function initJumpSelect(data) {
            const select = document.getElementById('jumpSelect');
            if(data.length === 0) return;
            const totalMinutes = Math.ceil(data[data.length - 1].seconds / 60);
            select.innerHTML = '<option value="0">00:00 - Kh·ªüi ƒë·∫ßu</option>';
            for(let i = 1; i <= totalMinutes; i++) {
                const option = document.createElement('option');
                option.value = i * 60;
                option.textContent = `${i < 10 ? '0'+i : i}:00`;
                select.appendChild(option);
            }
            select.addEventListener('change', (e) => jumpToTime(parseInt(e.target.value)));
        }

        // 6. Simulation Logic
        function jumpToTime(seconds) {
            currentSimulationTime = seconds;
            updateTimeDisplay(currentSimulationTime);
            highlightCurrentLine();
            scrollToActive();
        }
        function updateTimeDisplay(seconds) {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;
            const formatted = `${h > 0 ? h + ':' : ''}${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
            document.getElementById('currentTimeDisplay').textContent = formatted;
        }
        function highlightCurrentLine() {
            let activeItem = null;
            for (let i = transcripts.length - 1; i >= 0; i--) {
                if (transcripts[i].seconds <= currentSimulationTime) {
                    activeItem = transcripts[i];
                    break;
                }
            }
            
            // Check if active item changed
            const currentActive = document.querySelector('.active-line');
            const newActiveId = activeItem ? `line-${activeItem.id}` : null;
            
            if (currentActive && currentActive.id !== newActiveId) {
                currentActive.classList.remove('active-line');
            }

            if (activeItem && (!currentActive || currentActive.id !== newActiveId)) {
                const el = document.getElementById(newActiveId);
                if (el) {
                    el.classList.add('active-line');
                    // Auto Read Logic
                    if(isPlaying && document.getElementById('autoRead').checked) {
                        speakText(activeItem.cn, `audio-btn-${activeItem.id}`);
                    }
                }
            }
        }
        function scrollToActive() {
            const active = document.querySelector('.active-line');
            if (active) active.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        function togglePlay() {
            const btnPlay = document.getElementById('btnPlay');
            const btnPause = document.getElementById('btnPause');
            if (isPlaying) {
                clearInterval(simulationInterval);
                window.speechSynthesis.cancel(); // Stop audio on pause
                isPlaying = false;
                btnPlay.classList.remove('hidden'); btnPlay.classList.add('flex');
                btnPause.classList.add('hidden');
            } else {
                isPlaying = true;
                btnPlay.classList.add('hidden');
                btnPause.classList.remove('hidden'); btnPause.classList.add('flex');
                
                // Trigger immediate highlight check for audio start
                highlightCurrentLine();

                simulationInterval = setInterval(() => {
                    currentSimulationTime++;
                    updateTimeDisplay(currentSimulationTime);
                    highlightCurrentLine(); // This triggers audio if needed
                    if(currentSimulationTime % 2 === 0) scrollToActive();
                    if (transcripts.length > 0 && currentSimulationTime > transcripts[transcripts.length-1].seconds + 20) togglePlay();
                }, 1000 / simulationSpeed);
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            transcripts = parseSubtitles(rawSubtitleData);
            analyzeVocabulary(transcripts);
            renderList(transcripts);
            initJumpSelect(transcripts);
            
            document.getElementById('searchInput').addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                const filtered = transcripts.filter(t => 
                    t.searchText.includes(term) || t.timeFormatted.includes(term)
                );
                renderList(filtered);
            });

            document.getElementById('btnPlay').addEventListener('click', togglePlay);
            document.getElementById('btnPause').addEventListener('click', togglePlay);
            document.getElementById('btnReset').addEventListener('click', () => {
                if(isPlaying) togglePlay();
                jumpToTime(0);
            });

            const tttBtn = document.getElementById('tttToggle');
            tttBtn.addEventListener('click', () => {
                analysisMode = !analysisMode;
                if (analysisMode) {
                    tttBtn.classList.add('bg-green-900', 'border-green-700', 'ring-2', 'ring-green-500', 'ring-offset-1', 'ring-offset-stone-900');
                    tttBtn.classList.remove('bg-stone-800');
                    document.getElementById('transcriptContainer').classList.add('analysis-mode-active');
                    document.getElementById('analysisLegend').classList.remove('hidden');
                    
                    const term = document.getElementById('searchInput').value.toLowerCase();
                    const currentItems = transcripts.filter(t => t.searchText.includes(term));
                    renderList(currentItems);
                    highlightCurrentLine();
                    scrollToActive();
                    document.getElementById('analysisLegend').scrollIntoView({behavior: 'smooth', block: 'center'});
                } else {
                    tttBtn.classList.remove('bg-green-900', 'border-green-700', 'ring-2', 'ring-green-500', 'ring-offset-1', 'ring-offset-stone-900');
                    tttBtn.classList.add('bg-stone-800');
                    document.getElementById('transcriptContainer').classList.remove('analysis-mode-active');
                    document.getElementById('analysisLegend').classList.add('hidden');
                    
                    const term = document.getElementById('searchInput').value.toLowerCase();
                    renderList(transcripts.filter(t => t.searchText.includes(term)));
                    highlightCurrentLine();
                }
            });

            const modeBtn = document.getElementById('modeToggle');
            let isLightMode = false; // Default is Dark now
            modeBtn.addEventListener('click', () => {
                isLightMode = !isLightMode;
                const body = document.body;
                
                // Toggle Logic
                if(isLightMode) {
                    // Switch to LIGHT
                    body.style.backgroundColor = '#fdfbf7'; 
                    body.style.color = '#44403c';
                    modeBtn.textContent = "üåô Ch·∫ø ƒë·ªô T·ªëi";
                    modeBtn.classList.remove('text-stone-300');
                    modeBtn.classList.add('text-stone-700', 'bg-stone-100');

                    // Global elements styles for Light
                    document.querySelectorAll('.bg-stone-900').forEach(el => el.classList.replace('bg-stone-900', 'bg-white'));
                    document.querySelectorAll('.bg-stone-800').forEach(el => el.classList.replace('bg-stone-800', 'bg-white'));
                    document.querySelectorAll('.text-stone-200').forEach(el => el.classList.replace('text-stone-200', 'text-stone-800'));
                    document.querySelectorAll('.text-stone-400').forEach(el => el.classList.replace('text-stone-400', 'text-stone-500'));
                    
                    // Specific Text Colors
                    const cnEls = document.querySelectorAll('.cn-text');
                    cnEls.forEach(el => el.style.color = '#292524');
                    const vietHanEls = document.querySelectorAll('.viet-han-text');
                    vietHanEls.forEach(el => el.style.color = '#b45309');
                    const vietTransEls = document.querySelectorAll('.viet-trans-text');
                    vietTransEls.forEach(el => el.style.color = '#15803d');
                    const enEls = document.querySelectorAll('.en-text');
                    enEls.forEach(el => el.style.color = '#57534e');
                    
                } else {
                    // Switch to DARK (Default)
                    body.style.backgroundColor = '#1c1917'; 
                    body.style.color = '#e7e5e4';
                    modeBtn.textContent = "‚òÄÔ∏è Ch·∫ø ƒë·ªô S√°ng";
                    modeBtn.classList.add('text-stone-300');
                    modeBtn.classList.remove('text-stone-700', 'bg-stone-100');
                    
                    location.reload(); 
                }
            });
        });
    </script>
</body>
</html>
